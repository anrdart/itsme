(function(){'use strict';const ModuleLoader={loaded: new Set(),loading: new Set(),loadScript: function(src,callback){if(this.loaded.has(src)){callback && callback();return}if(this.loading.has(src)){const checkLoaded=()=>{if(this.loaded.has(src)){callback && callback()}else{setTimeout(checkLoaded,10)}};checkLoaded();return}this.loading.add(src);const script=document.createElement('script');script.src=src;script.async=true;script.onload=()=>{this.loading.delete(src);this.loaded.add(src);callback && callback()};script.onerror=()=>{this.loading.delete(src);console.error('Failed to load script:',src)};document.head.appendChild(script)},loadScripts: function(scripts,callback){if(!scripts.length){callback && callback();return}const loadNext=(index)=>{if(index >=scripts.length){callback && callback();return}this.loadScript(scripts[index],()=>{loadNext(index+1)})};loadNext(0)},loadScriptsParallel: function(scripts,callback){if(!scripts.length){callback && callback();return}let loaded=0;const total=scripts.length;scripts.forEach(script=>{this.loadScript(script,()=>{loaded++;if(loaded===total){callback && callback()}})})}};const ProgressiveLoader={init: function(){this.loadCritical();if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',()=>{this.loadFeatures()})}else{this.loadFeatures()}window.addEventListener('load',()=>{this.loadNonCritical()})},loadCritical: function(){console.log('Loading critical scripts...')},loadFeatures: function(){console.log('Loading feature scripts...');ModuleLoader.loadScriptsParallel([ '/js/optimized/features.min.js' ],()=>{console.log('Feature scripts loaded')})},loadNonCritical: function(){console.log('Loading non-critical scripts...');const loadNonCritical=()=>{ModuleLoader.loadScript('/js/optimized/nonCritical.min.js',()=>{console.log('Non-critical scripts loaded')})};if(window.requestIdleCallback){requestIdleCallback(loadNonCritical)}else{setTimeout(loadNonCritical,100)}}};ProgressiveLoader.init();window.ModuleLoader=ModuleLoader;window.ProgressiveLoader=ProgressiveLoader})();